const crypto = require('crypto');
const log = console.log;

let salt = "ABCD"; // 각각 사용자 salt가 다를 수 있다
let pass = "1234"+salt;
let sha512 = crypto.createHash('sha512').update('1234').digest('base64'); // 암호화 관련

log(sha512);

crypto.pbkdf2('1234', salt, 10000, 64, 'sha512', (err, key) => {
	console.log("key : " + key.toString("base64"));
}); // 회전시켜서 만들어낸 키값

const util = require('util');
const pbkdf2Promise = util.promisify(crypto.pbkdf2); // 가지고있는 콜백메서드를 promise 화 시켜줌

(async() => {

	console.time("암호화");
	let key = await pbkdf2Promise('1234', salt, 100000, 64, 'sha512');
	console.log("KEY PROMISE" + key);
	console.timeEnd("암호화");
}
)();